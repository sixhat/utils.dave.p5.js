class Dave{constructor(){this.grid=new Guides,this.g=this.grid,this.f=this.fillHsluv,this.s=this.strokeHsluv}fillHsluv(e,t,n){let s=hsluv.hsluvToRgb([e,t,n]);fill(s[0]*255,s[1]*255,s[2]*255)}strokeHsluv(e,t,n){let s=hsluv.hsluvToRgb([e,t,n]);stroke(s[0]*255,s[1]*255,s[2]*255)}pget(e,t,n){n.loadPixels();let s=pixelDensity();for(var o,i=0;i<s;i++)for(o=0;o<s;o++){let c=4*((t*s+o)*n.width*s+(e*s+i));pixels[c]=r,pixels[c+1]=g,pixels[c+2]=b,pixels[c+3]=a}}}const paleta={cor:[],tom:function(e,t=100,n=100){colorMode(HSB,360,100,100,100);const s=360/(e-1);for(;e-- >0;)this.cor[this.cor.length]=color(360-e*s,t,n)},luz:function(e=10,t=random(360),n=100){colorMode(HSB,360,100,100,100);const s=100/(e-1);for(;e-- >0;)this.cor[this.cor.length]=color(t,n,100-e*s)},sat:function(e=10,t=random(360),n=100){colorMode(HSB,360,100,100,100);const s=100/(e-1);for(;e-- >0;)this.cor[this.cor.length]=color(t,100-e*s,n)}};class Grid{constructor(e=1,t=1,n=0,s=0,o=width,i=height){this.linhas=e,this.colunas=t,this.margem=n,this.gutter=s,this.largura=o,this.altura=i}compute(){this.areaw=(this.largura-2*this.margem-(this.colunas-1)*this.gutter)/this.colunas,this.areah=(this.altura-2*this.margem-(this.linhas-1)*this.gutter)/this.linhas,this.areas=[],this.areas.length=this.linhas;for(let e=0;e<this.linhas;e++){this.areas[e]=[];for(let t=0;t<this.colunas;t++){const n={x:this.margem+(this.areaw+this.gutter)*t,y:this.margem+(this.areah+this.gutter)*e,w:this.areaw,h:this.areah};this.areas[e][t]=n}}}render(e=!1){push(),resetMatrix(),stroke("pink"),e?fill(e):noFill(),textSize(10);for(let e=0;e<this.linhas;e++)for(let n=0;n<this.colunas;n++){const t=this.areas[e][n];rect(t.x,t.y,t.w,t.h),text(e*this.colunas+n,t.x+2,t.y+10)}pop()}area(e=0,t=0){if(t<e){const n=t;t=e,e=n}if(t>=this.linhas*this.colunas){console.log("ERRO: Ã¡rea FIM fora da grelha");return}const n=Math.floor(e/this.colunas),s=e%this.colunas,o=Math.floor(t/this.colunas),i=t%this.colunas;return{x:this.areas[n][s].x,y:this.areas[n][s].y,w:this.areas[o][i].x+this.areas[o][i].w-this.areas[n][s].x,h:this.areas[o][i].y+this.areas[o][i].h-this.areas[n][s].y}}}class Guides{constructor(){this.horizontal=[],this.vertical=[],this.rectangles=[],this.color=color("#FF00FFAA")}show(){push(),stroke(this.color),noFill(),rectMode(CORNERS),this.horizontal.forEach(e=>line(0,e,width,e)),this.vertical.forEach(e=>line(e,0,e,height)),this.rectangles.forEach(e=>rect(e[0],e[1],e[2],e[3])),pop()}clear(){this.clearHorizontal(),this.clearVertical(),this.clearRectangles(),this.color=color("#FF00FFAA")}clearHorizontal(){this.horizontal=[]}clearVertical(){this.vertical=[]}clearRectangles(){this.rectangles=[]}}class Oscillator{constructor(e=1,t=1,n=2,s=0){this.period=e,this.amplitude=Math.abs(n-t)/2,this.frequency=1/this.period,this.center=(t+n)/2,this.phase=s,this.activate()}activate(){this.active=!0,this.start_time=Date.now()/1e3,this.t=Date.now()-this.start_time,this.y=this.center+this.amplitude*Math.sin(2*Math.PI*this.t*this.frequency+this.phase),this.x=this.t,this.px=this.x,this.pt=this.x,this.py=this.y}pause(){this.active=!1}unPause(){this.active=!0}go(){return this.active&&(this.pt=this.t,this.px=this.pt,this.py=this.y,this.t=Date.now()/1e3-this.start_time,this.y=this.center+this.amplitude*Math.sin(2*Math.PI*this.t*this.frequency+this.phase),this.x=this.t),this.y}}const range=e=>[...Array(e).keys()];class Turtle{constructor(e=0,t=0,n=-HALF_PI){this.x=e,this.y=t,this.penDown=!0,this.penColor=0,this.penWeight=1,this.heading=n,this.stack=[],this.cl=this.color,this.pu=this.pen_up,this.up=this.pen_up,this.pd=this.pen_down,this.down=this.pen_down,this.rt=this.right,this.lt=this.left,this.fd=this.forward,this.fw=this.forward,this.fwd=this.forward,this.bk=this.backward,this.back=this.backward,this.st=this.show}drawLSystem(e,t,n){this.drawString(e.endString,t,n)}drawString(e,t,n){const s={f:e=>{e.pu,e.forward(t)},F:e=>{e.pd,e.forward(t)},"[":e=>e.push(),"]":e=>e.pop(),"+":e=>e.right(n),"-":e=>e.left(n)},o=Object.keys(s);[...e].forEach(e=>{o.includes(e)&&s[e](this)})}push(){this.stack.push({x:this.x,y:this.y,penDown:this.penDown,penColor:this.penColor,penWeight:this.penWeight,heading:this.heading})}pop(){const e=this.stack.pop();this.x=e.x,this.y=e.y,this.penDown=e.penDown,this.penColor=e.penColor,this.penWeight=e.penWeight,this.heading=e.heading}hide(){this.push(),stroke("#00000000"),this.pop()}show(){this.push(),stroke("pink"),this.pen_down(),this.rt(10),this.fd(-10),this.fd(10),this.lt(20),this.fd(-10),this.pop()}color(e){this.penColor=e}pen_up(){this.penDown=!1}pen_down(){this.penDown=!0}right(e){this.heading+=radians(e)}left(e){this.heading-=radians(e)}pos(e,t){this.x=e,this.y=t}forward(e){const t=this.x+e*cos(this.heading),n=this.y+e*sin(this.heading);this.penDown&&(push(),stroke(this.penColor),strokeWeight(this.penWeight),line(this.x,this.y,t,n),pop()),this.x=t,this.y=n}backward(e){const t=this.penDown;this.penDown=!1,this.forward(-e),this.penDown=t}style(e){this.penWeight=e}hd(e){this.heading=radians(e)}}const MENU_DIR=Object.freeze({VERTICAL:0,HORIZONTAL:1}),BUTTON_SIZE=Object.freeze({HEIGHT:20,PADDING_X:10,FONT_SIZE:10});class Menu{constructor(e,t,n=0){this.p=createVector(e,t),this.btns=[],this.dir=n}add(e){this.btns.push(e),this.layout()}layout(){for(let e=0;e<this.btns.length;e++){let t=this.btns[e];this.dir===MENU_DIR.VERTICAL?t.p=createVector(this.p.x,this.p.y+22*e):t.p=createVector(this.p.x+e*(t.tw+20),this.p.y)}}click(){for(let e of this.btns)e.click()}render(){for(let e of this.btns)e.render()}}class Button{constructor(e=0,t=0,n,s){this.p=createVector(e,t),this.a=n,this.texto=s,textSize(10),this.tw=textWidth(this.texto)}mouseIn(){return mouseX>this.p.x&&mouseX<this.p.x+this.tw+BUTTON_SIZE.PADDING_X&&mouseY>this.p.y&&mouseY<this.p.y+BUTTON_SIZE.HEIGHT}click(){this.mouseIn()&&this.a(mouseX)}render(){push(),resetMatrix(),textSize(BUTTON_SIZE.FONT_SIZE),this.mouseIn()?(fill("#FFF"),mouseIsPressed&&fill("#AAA")):fill("#AAA3"),rect(this.p.x,this.p.y,this.tw+2*BUTTON_SIZE.PADDING_X,BUTTON_SIZE.HEIGHT),fill(0),text(this.texto,this.p.x+BUTTON_SIZE.PADDING_X,this.p.y+2*BUTTON_SIZE.HEIGHT-6),pop()}}