class Dave{constructor(){this.grid=new Grid,this.g=this.grid,this.f=this.fillHsluv,this.s=this.strokeHsluv}fillHsluv(t,s,i){let h=hsluv.hsluvToRgb([t,s,i]);fill(255*h[0],255*h[1],255*h[2])}strokeHsluv(t,s,i){let h=hsluv.hsluvToRgb([t,s,i]);stroke(255*h[0],255*h[1],255*h[2])}pget(t,s,i){i.loadPixels();let h=pixelDensity();for(var e=0;e<h;e++)for(var n=0;n<h;n++){let o=4*((s*h+n)*i.width*h+(t*h+e));pixels[o]=r,pixels[o+1]=g,pixels[o+2]=b,pixels[o+3]=a}}}class Grid{constructor(){this.horizontal=[],this.vertical=[],this.rectangles=[],this.color=color("#FF00FFAA")}show(){push(),stroke(this.color),noFill(),rectMode(CORNERS),this.horizontal.forEach(t=>line(0,t,width,t)),this.vertical.forEach(t=>line(t,0,t,height)),this.rectangles.forEach(t=>rect(t[0],t[1],t[2],t[3])),pop()}clear(){this.clearHorizontal(),this.clearVertical(),this.clearRectangles(),this.color=color("#FF00FFAA")}clearHorizontal(){this.horizontal=[]}clearVertical(){this.vertical=[]}clearRectangles(){this.rectangles=[]}}var LSystem;LSystem=class{constructor(t,s,i){this.alphabet=t,this.axiom=s,this.rules=i,this.startString=this.axiom,this.endString="",this.nIters=0}processString(t){var s,i,h,e;for(e="",i=0,h=t.length;i<h;i++)s=t[i],e+=this.rules[s]?this.rules[s]:s;return e}iterate(t){var s,i;if(t<1)return this.endStrig;for(s=1,i=t;1<=i?s<=i:s>=i;1<=i?++s:--s)this.endString=this.processString(this.startString),this.startString=this.endString;return this.nIters+=t,this.endString}addRule(t,s){return this.rules[t]=s}removeRule(t){return delete this.rules[t]}};class Turtle{constructor(t,s,i){this.x=0|t,this.y=0|s,this.penDown=!0,this.penColor=0,this.penWeight=1,this.heading=i||-HALF_PI,this.stack=[],this.cl=this.color,this.pu=this.up,this.pd=this.down,this.rt=this.right,this.lt=this.left,this.fd=this.forward,this.fw=this.forward,this.bk=this.backward,this.back=this.backward,this.st=this.style}drawLSystem(t,s,i){this.drawString(t.endString,s,i)}drawString(t,s,i){for(const h of t)switch(h){case"F":this.pd(),this.fw(s);break;case"f":this.pu(),this.fw(s);break;case"[":this.push();break;case"]":this.pop();break;case"+":this.rt(i);break;case"-":this.lt(i)}}push(){this.stack.push({x:this.x,y:this.y,penDown:this.penDown,penColor:this.penColor,penWeight:this.penWeight,heading:this.heading})}pop(){const t=this.stack.pop();this.x=t.x,this.y=t.y,this.penDown=t.penDown,this.penColor=t.penColor,this.penWeight=t.penWeight,this.heading=t.heading}show(){this.push(),stroke("pink"),this.down(),this.rt(10),this.fd(-10),this.fd(10),this.lt(20),this.fd(-10),this.pop()}color(t){this.penColor=t}up(){this.penDown=!1}down(){this.penDown=!0}right(t){this.heading+=radians(t)}left(t){this.heading-=radians(t)}pos(t,s){this.x=t,this.y=s}forward(t){const s=this.x+t*cos(this.heading),i=this.y+t*sin(this.heading);this.penDown&&(push(),stroke(this.penColor),strokeWeight(this.penWeight),line(this.x,this.y,s,i),pop()),this.x=s,this.y=i}backward(t){const s=this.penDown;this.penDown=!1,this.forward(-t),this.penDown=s}style(t){this.penWeight=t}hd(t){this.heading=radians(t)}}
