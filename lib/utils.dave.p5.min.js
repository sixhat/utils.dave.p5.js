class Dave{constructor(){this.grid=new Grid,this.g=this.grid,this.f=this.fillHsluv,this.s=this.strokeHsluv}fillHsluv(t,s,i){let h=hsluv.hsluvToRgb([t,s,i]);fill(255*h[0],255*h[1],255*h[2])}strokeHsluv(t,s,i){let h=hsluv.hsluvToRgb([t,s,i]);stroke(255*h[0],255*h[1],255*h[2])}pget(t,s,i){i.loadPixels();let h=pixelDensity();for(var e=0;e<h;e++)for(var o=0;o<h;o++){let n=4*((s*h+o)*i.width*h+(t*h+e));pixels[n]=r,pixels[n+1]=g,pixels[n+2]=b,pixels[n+3]=a}}}const paleta={cor:[],tom:function(t,s=100,i=100){colorMode(HSB,360,100,100,100);const h=360/(t-1);for(;t-- >0;)this.cor[this.cor.length]=color(360-t*h,s,i)},luz:function(t=10,s=random(360),i=100){colorMode(HSB,360,100,100,100);const h=100/(t-1);for(;t-- >0;)this.cor[this.cor.length]=color(s,i,100-t*h)},sat:function(t=10,s=random(360),i=100){colorMode(HSB,360,100,100,100);const h=100/(t-1);for(;t-- >0;)this.cor[this.cor.length]=color(s,100-t*h,i)}};class Grid{constructor(t=1,s=1,i=0,h=0,r=width,e=height){this.linhas=t,this.colunas=s,this.margem=i,this.gutter=h,this.largura=r,this.altura=e}compute(){this.areaw=(this.largura-2*this.margem-(this.colunas-1)*this.gutter)/this.colunas,this.areah=(this.altura-2*this.margem-(this.linhas-1)*this.gutter)/this.linhas,this.areas=[],this.areas.length=this.linhas;for(let t=0;t<this.linhas;t++){this.areas[t]=[];for(let s=0;s<this.colunas;s++){const i={x:this.margem+(this.areaw+this.gutter)*s,y:this.margem+(this.areah+this.gutter)*t,w:this.areaw,h:this.areah};this.areas[t][s]=i}}}render(t=!1){push(),resetMatrix(),stroke("pink"),t?fill(t):noFill(),textSize(10);for(let t=0;t<this.linhas;t++)for(let s=0;s<this.colunas;s++){const i=this.areas[t][s];rect(i.x,i.y,i.w,i.h),text(t*this.colunas+s,i.x+2,i.y+10)}pop()}area(t=0,s=0){if(s<t){const i=s;s=t,t=i}if(s>=this.linhas*this.colunas)return void console.log("ERRO: Ã¡rea FIM fora da grelha");const i=Math.floor(t/this.colunas),h=t%this.colunas,r=Math.floor(s/this.colunas),e=s%this.colunas;return{x:this.areas[i][h].x,y:this.areas[i][h].y,w:this.areas[r][e].x+this.areas[r][e].w-this.areas[i][h].x,h:this.areas[r][e].y+this.areas[r][e].h-this.areas[i][h].y}}}class Guides{constructor(){this.horizontal=[],this.vertical=[],this.rectangles=[],this.color=color("#FF00FFAA")}show(){push(),stroke(this.color),noFill(),rectMode(CORNERS),this.horizontal.forEach(t=>line(0,t,width,t)),this.vertical.forEach(t=>line(t,0,t,height)),this.rectangles.forEach(t=>rect(t[0],t[1],t[2],t[3])),pop()}clear(){this.clearHorizontal(),this.clearVertical(),this.clearRectangles(),this.color=color("#FF00FFAA")}clearHorizontal(){this.horizontal=[]}clearVertical(){this.vertical=[]}clearRectangles(){this.rectangles=[]}}var LSystem;LSystem=class{constructor(t,s,i){this.alphabet=t,this.axiom=s,this.rules=i,this.startString=this.axiom,this.endString="",this.nIters=0}processString(t){var s,i,h,r;for(r="",i=0,h=t.length;i<h;i++)s=t[i],r+=this.rules[s]?this.rules[s]:s;return r}iterate(t){var s,i;if(t<1)return this.endStrig;for(s=1,i=t;1<=i?s<=i:s>=i;1<=i?++s:--s)this.endString=this.processString(this.startString),this.startString=this.endString;return this.nIters+=t,this.endString}addRule(t,s){return this.rules[t]=s}removeRule(t){return delete this.rules[t]}};class Turtle{constructor(t,s,i){this.x=0|t,this.y=0|s,this.penDown=!0,this.penColor=0,this.penWeight=1,this.heading=i||-HALF_PI,this.stack=[],this.cl=this.color,this.pu=this.up,this.pd=this.down,this.rt=this.right,this.lt=this.left,this.fd=this.forward,this.fw=this.forward,this.fwd=this.forward,this.bk=this.backward,this.back=this.backward,this.st=this.style}drawLSystem(t,s,i){this.drawString(t.endString,s,i)}drawString(t,s,i){const h={f:t=>{t.pu,t.forward(s)},F:t=>{t.pd,t.forward(s)},"[":t=>t.push(),"]":t=>t.pop(),"+":t=>t.right(i),"-":t=>t.left(i)},r=Object.keys(h);[...t].forEach(t=>{r.includes(t)&&h[t](this)})}push(){this.stack.push({x:this.x,y:this.y,penDown:this.penDown,penColor:this.penColor,penWeight:this.penWeight,heading:this.heading})}pop(){const t=this.stack.pop();this.x=t.x,this.y=t.y,this.penDown=t.penDown,this.penColor=t.penColor,this.penWeight=t.penWeight,this.heading=t.heading}show(){this.push(),stroke("pink"),this.down(),this.rt(10),this.fd(-10),this.fd(10),this.lt(20),this.fd(-10),this.pop()}color(t){this.penColor=t}up(){this.penDown=!1}down(){this.penDown=!0}right(t){this.heading+=radians(t)}left(t){this.heading-=radians(t)}pos(t,s){this.x=t,this.y=s}forward(t){const s=this.x+t*cos(this.heading),i=this.y+t*sin(this.heading);this.penDown&&(push(),stroke(this.penColor),strokeWeight(this.penWeight),line(this.x,this.y,s,i),pop()),this.x=s,this.y=i}backward(t){const s=this.penDown;this.penDown=!1,this.forward(-t),this.penDown=s}style(t){this.penWeight=t}hd(t){this.heading=radians(t)}}
